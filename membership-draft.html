<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fablab Membership Draft</title>
  <style>
    /* ─── Reset & Base Styles ─────────────────────────────────── */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: Arial, sans-serif;
      background-color: #f5f7fa;
      color: #333;
      line-height: 1.5;
      padding: 20px;
    }
    h1, h2, h3 {
      margin-bottom: 10px;
      color: #222;
    }
    ul {
      list-style: none;
    }
    /* ─── Container & Header ─────────────────────────────────── */
    header {
      text-align: center;
      margin-bottom: 30px;
    }
    header h1 {
      font-size: 2rem;
    }
    header p {
      margin-top: 8px;
      color: #555;
    }
    /* ─── Membership Cards Grid ─────────────────────────────────── */
    .membership-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      max-width: 1800px;
      margin: 0 auto;
    }
    .card {
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transition: transform 0.2s ease;
    }
    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.12);
    }
    .card-header {
      background-color: #4a76a8;
      color: #fff;
      padding: 20px;
      text-align: center;
    }
    .card-header h2 {
      font-size: 1.5rem;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    .name-edit-btn {
      cursor: pointer;
      color: #666;
      font-size: 0.9rem;
      padding: 4px 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      background: #f8f9fa;
      transition: all 0.2s ease;
    }
    .name-edit-btn:hover {
      background: #e9ecef;
      color: #4a76a8;
    }
    .name-input {
      width: 200px;
      padding: 4px 8px;
      border: 1px solid #4a76a8;
      border-radius: 4px;
      font-size: 1.5rem;
      font-weight: bold;
      color: #4a76a8;
      text-align: center;
    }
    .card-header p {
      font-size: 0.95rem;
      opacity: 0.9;
    }
    .card-body {
      padding: 20px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    .price {
      font-size: 1.25rem;
      font-weight: bold;
      margin-bottom: 15px;
      color: #4a76a8;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .price-edit-btn {
      cursor: pointer;
      color: #666;
      font-size: 0.9rem;
      padding: 4px 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      background: #f8f9fa;
      transition: all 0.2s ease;
    }
    .price-edit-btn:hover {
      background: #e9ecef;
      color: #4a76a8;
    }
    .price-input {
      width: 150px;
      padding: 4px 8px;
      border: 1px solid #4a76a8;
      border-radius: 4px;
      font-size: 1.25rem;
      font-weight: bold;
      color: #4a76a8;
    }
    /* ─── Feature List ─────────────────────────────────────────── */
    .feature-list {
      margin-top: 10px;
      flex: 1;
    }
    .feature-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid #ececec;
      transition: background-color 0.15s ease;
    }
    .feature-item:last-child {
      border-bottom: none;
    }
    .feature-text {
      flex: 1;
      font-size: 0.95rem;
      color: #333;
    }
    .feature-icons {
      display: flex;
      gap: 12px;
      margin-left: 10px;
    }
    .icon-btn {
      cursor: pointer;
      font-size: 1.1rem;
      user-select: none;
      transition: color 0.2s ease;
    }
    .icon-btn.ok {
      color: #28a745; /* green */
    }
    .icon-btn.ok.included {
      color: #2e7d32; /* Darker green for the checkmark */
      font-weight: bold;
    }
    .icon-btn.remove {
      color: #dc3545; /* red */
    }
    /* When a feature is "included" (after clicking OK), highlight its row */
    .included {
      background-color: #e8f5e9; /* Light green background */
      border-left: 4px solid #4caf50; /* Green border on the left */
      padding-left: 12px; /* Add some padding to account for the border */
    }
    .feature-item.included .feature-text {
      color: #1b5e20; /* Dark green text for included features */
      font-weight: 500;
    }
    /* When a feature is hidden (after clicking ✕), we add .hidden to remove from view */
    .hidden {
      display: none;
    }
    /* Styles for removed features section */
    .removed-features {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 2px dashed #e0e0e0;
    }
    .removed-features h3 {
      font-size: 1rem;
      color: #666;
      margin-bottom: 15px;
    }
    .removed-features .feature-item {
      opacity: 0.7;
    }
    .removed-features .feature-item:hover {
      opacity: 1;
    }
    .restore-btn {
      color: #4a76a8;
      cursor: pointer;
      font-size: 0.9rem;
      margin-left: 10px;
      text-decoration: underline;
    }
    .restore-btn:hover {
      color: #2c4b6b;
    }
    .add-feature-form {
      margin-top: 20px;
      padding: 15px;
      background-color: #f8f9fa;
      border-radius: 8px;
    }
    .add-feature-form h3 {
      font-size: 1rem;
      color: #666;
      margin-bottom: 10px;
    }
    .new-feature-input {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 0.95rem;
    }
    .add-feature-btn {
      background-color: #4a76a8;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.95rem;
      transition: background-color 0.2s ease;
    }
    .add-feature-btn:hover {
      background-color: #2c4b6b;
    }
    .button-group {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    .button-group .add-feature-btn {
      flex: 1;
    }
    .button-group .add-feature-btn[data-type="restriction"] {
      background-color: #dc3545;
    }
    .button-group .add-feature-btn[data-type="restriction"]:hover {
      background-color: #c82333;
    }
    .section {
      margin-bottom: 20px;
      padding: 15px;
      background-color: #f8f9fa;
      border-radius: 8px;
    }
    .section h3 {
      font-size: 1.1rem;
      color: #4a76a8;
      margin-bottom: 15px;
    }
    .restrictions-section {
      background-color: #fff3f3;
    }
    .restrictions-section h3 {
      color: #dc3545;
    }
    .features-section {
      background-color: #f0f7ff;
    }
    .features-section h3 {
      color: #28a745;
    }
    /* Export Button Styles */
    .export-section {
      text-align: center;
      margin: 30px auto;
      padding: 20px;
      max-width: 800px;
    }
    .export-btn {
      background-color: #28a745;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1rem;
      transition: background-color 0.2s ease;
    }
    .export-btn:hover {
      background-color: #218838;
    }
    .export-info {
      margin-top: 15px;
      color: #666;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>

  <!-- ─── Header / Hero ─────────────────────────────────── -->
  <header>
    <h1>Fablab Membership Draft</h1>
    <p>Select or remove features in each tier to finalize your plan</p>
  </header>

  <!-- ─── Membership Cards ─────────────────────────────────── -->
  <section class="membership-container">

    <!-- ─── 1) Student Tier ──────────────────────────────── -->
    <div class="card" id="card-student">
      <div class="card-header">
        <h2>
          <span class="tier-name">Student</span>
          <button class="name-edit-btn">Edit Name</button>
        </h2>
        <p>Ideal For: Students, Recent Graduates, Learners</p>
      </div>
      <div class="card-body">
        <div class="price">
          <span class="price-value">500,000 UZS / month</span>
          <button class="price-edit-btn">Edit Price</button>
        </div>
        
        <!-- Features Section -->
        <div class="section features-section">
          <h3>Features</h3>
          <ul class="feature-list">
            <!-- Example Feature #1 -->
            <li class="feature-item" data-tier="student" data-feature-id="student-feature-1">
              <span class="feature-text">10 hours/month access to machines</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <!-- Example Feature #2 -->
            <li class="feature-item" data-tier="student">
              <span class="feature-text">Basic 8-hour training program</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <!-- Example Feature #3 -->
            <li class="feature-item" data-tier="student">
              <span class="feature-text">Community workshop access (2 sessions/month)</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <!-- Example Feature #4 -->
            <li class="feature-item" data-tier="student">
              <span class="feature-text">Student project storage (1 m³)</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <!-- Example Feature #5 -->
            <li class="feature-item" data-tier="student">
              <span class="feature-text">Email technical support</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <!-- Example Feature #6 -->
            <li class="feature-item" data-tier="student">
              <span class="feature-text">Basic materials included</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <!-- Example Feature #7 -->
            <li class="feature-item" data-tier="student">
              <span class="feature-text">Educational discount (30% off materials)</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <!-- Example Feature #8 -->
            <li class="feature-item" data-tier="student">
              <span class="feature-text">Access only during off-peak hours (9AM–5PM)</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
          </ul>
        </div>

        <!-- Restrictions Section -->
        <div class="section restrictions-section">
          <h3>Restrictions</h3>
          <ul class="restriction-list">
            <li class="feature-item" data-tier="student">
              <span class="feature-text">Age: 16-25 years old</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="student">
              <span class="feature-text">Valid student ID required</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="student">
              <span class="feature-text">Maximum 2 projects at a time</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
          </ul>
        </div>

        <div class="removed-features">
          <h3>Removed Items</h3>
          <ul class="feature-list" id="removed-student"></ul>
        </div>
        <!-- Add New Feature Form -->
        <div class="add-feature-form">
          <h3>Add New Feature</h3>
          <input type="text" class="new-feature-input" placeholder="Enter new feature description">
          <div class="button-group">
            <button class="add-feature-btn" data-tier="student">Add Feature</button>
            <button class="add-feature-btn" data-tier="student" data-type="restriction">Add Restriction</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ─── 2) Maker Tier ────────────────────────────────── -->
    <div class="card" id="card-maker">
      <div class="card-header">
        <h2>
          <span class="tier-name">Maker</span>
          <button class="name-edit-btn">Edit Name</button>
        </h2>
        <p>Ideal For: Hobbyists, Freelancers, Weekend Makers</p>
      </div>
      <div class="card-body">
        <div class="price">
          <span class="price-value">1,000,000 UZS / month</span>
          <button class="price-edit-btn">Edit Price</button>
        </div>
        
        <!-- Features Section -->
        <div class="section features-section">
          <h3>Features</h3>
          <ul class="feature-list">
            <li class="feature-item" data-tier="maker">
              <span class="feature-text">20 hours/month access to machines</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="maker">
              <span class="feature-text">Free advanced training session (4 hours)</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="maker">
              <span class="feature-text">Community workshop access (4 sessions/month)</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="maker">
              <span class="feature-text">Project storage (2 m³)</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="maker">
              <span class="feature-text">Priority email/phone support</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="maker">
              <span class="feature-text">Free basic materials (monthly allowance)</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="maker">
              <span class="feature-text">15% discount on extra materials</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="maker">
              <span class="feature-text">Workspace booking (evenings & weekends allowed)</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
          </ul>
        </div>

        <!-- Restrictions Section -->
        <div class="section restrictions-section">
          <h3>Restrictions</h3>
          <ul class="restriction-list">
            <li class="feature-item" data-tier="maker">
              <span class="feature-text">Age: 18+ years old</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="maker">
              <span class="feature-text">Basic safety training required</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="maker">
              <span class="feature-text">Maximum 4 projects at a time</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
          </ul>
        </div>

        <div class="removed-features">
          <h3>Removed Items</h3>
          <ul class="feature-list" id="removed-maker"></ul>
        </div>
        <!-- Add New Feature Form -->
        <div class="add-feature-form">
          <h3>Add New Feature</h3>
          <input type="text" class="new-feature-input" placeholder="Enter new feature description">
          <div class="button-group">
            <button class="add-feature-btn" data-tier="maker">Add Feature</button>
            <button class="add-feature-btn" data-tier="maker" data-type="restriction">Add Restriction</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ─── 3) Professional Tier ───────────────────────────── -->
    <div class="card" id="card-professional">
      <div class="card-header">
        <h2>
          <span class="tier-name">Professional</span>
          <button class="name-edit-btn">Edit Name</button>
        </h2>
        <p>Ideal For: Entrepreneurs, Small Businesses</p>
      </div>
      <div class="card-body">
        <div class="price">
          <span class="price-value">2,000,000 UZS / month</span>
          <button class="price-edit-btn">Edit Price</button>
        </div>
        
        <!-- Features Section -->
        <div class="section features-section">
          <h3>Features</h3>
          <ul class="feature-list">
            <li class="feature-item" data-tier="professional">
              <span class="feature-text">40 hours/month access to machines</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="professional">
              <span class="feature-text">One-on-one coaching session (4 hrs/month)</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="professional">
              <span class="feature-text">Workshop access (unlimited)</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="professional">
              <span class="feature-text">Priority storage (5 m³)</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="professional">
              <span class="feature-text">Dedicated account manager</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="professional">
              <span class="feature-text">Free premium materials (monthly allowance)</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="professional">
              <span class="feature-text">20% discount on extra materials</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="professional">
              <span class="feature-text">24/7 facility access</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
          </ul>
        </div>

        <!-- Restrictions Section -->
        <div class="section restrictions-section">
          <h3>Restrictions</h3>
          <ul class="restriction-list">
            <li class="feature-item" data-tier="professional">
              <span class="feature-text">Age: 21+ years old</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="professional">
              <span class="feature-text">Advanced safety certification required</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="professional">
              <span class="feature-text">Business registration required</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
          </ul>
        </div>

        <div class="removed-features">
          <h3>Removed Items</h3>
          <ul class="feature-list" id="removed-professional"></ul>
        </div>
        <!-- Add New Feature Form -->
        <div class="add-feature-form">
          <h3>Add New Feature</h3>
          <input type="text" class="new-feature-input" placeholder="Enter new feature description">
          <div class="button-group">
            <button class="add-feature-btn" data-tier="professional">Add Feature</button>
            <button class="add-feature-btn" data-tier="professional" data-type="restriction">Add Restriction</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ─── 4) Startup Tier ────────────────────────────────── -->
    <div class="card" id="card-startup">
      <div class="card-header">
        <h2>
          <span class="tier-name">Startup</span>
          <button class="name-edit-btn">Edit Name</button>
        </h2>
        <p>Ideal For: Startups, R&D Teams, Small Tech Firms</p>
      </div>
      <div class="card-body">
        <div class="price">
          <span class="price-value">3,500,000 UZS / month</span>
          <button class="price-edit-btn">Edit Price</button>
        </div>
        
        <!-- Features Section -->
        <div class="section features-section">
          <h3>Features</h3>
          <ul class="feature-list">
            <li class="feature-item" data-tier="startup">
              <span class="feature-text">Unlimited machine access</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="startup">
              <span class="feature-text">Weekly consulting session (2 hrs/week)</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="startup">
              <span class="feature-text">Full workshop access (unlimited)</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="startup">
              <span class="feature-text">Priority storage (10 m³)</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="startup">
              <span class="feature-text">Dedicated technical lead support</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="startup">
              <span class="feature-text">Free premium materials (highest tier allowance)</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="startup">
              <span class="feature-text">30% discount on extra materials</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="startup">
              <span class="feature-text">Private after-hours access + lounge area</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
          </ul>
        </div>

        <!-- Restrictions Section -->
        <div class="section restrictions-section">
          <h3>Restrictions</h3>
          <ul class="restriction-list">
            <li class="feature-item" data-tier="startup">
              <span class="feature-text">Age: 18+ years old</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="startup">
              <span class="feature-text">Full safety certification required</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
            <li class="feature-item" data-tier="startup">
              <span class="feature-text">Registered business entity required</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            </li>
          </ul>
        </div>

        <div class="removed-features">
          <h3>Removed Items</h3>
          <ul class="feature-list" id="removed-startup"></ul>
        </div>
        <!-- Add New Feature Form -->
        <div class="add-feature-form">
          <h3>Add New Feature</h3>
          <input type="text" class="new-feature-input" placeholder="Enter new feature description">
          <div class="button-group">
            <button class="add-feature-btn" data-tier="startup">Add Feature</button>
            <button class="add-feature-btn" data-tier="startup" data-type="restriction">Add Restriction</button>
          </div>
        </div>
      </div>
    </div>

  </section>

  <!-- Export Section -->
  <section class="export-section">
    <button class="export-btn" id="exportChanges">Export Changes</button>
    <p class="export-info">Click to download a JSON file with all membership tier details and changes</p>
  </section>

  <!-- ─── JavaScript for Toggling Features ─────────────────────────────────── -->
  <script>
    // IndexedDB setup
    const dbName = 'membershipDB';
    const storeName = 'membershipData';
    let db;

    // Initialize IndexedDB
    const initDB = () => {
      return new Promise((resolve, reject) => {
        const request = indexedDB.open(dbName, 1);

        request.onerror = (event) => {
          console.error('Database error:', event.target.error);
          reject(event.target.error);
        };

        request.onsuccess = (event) => {
          db = event.target.result;
          console.log('Database connected');
          resolve(db);
        };

        request.onupgradeneeded = (event) => {
          const db = event.target.result;
          if (!db.objectStoreNames.contains(storeName)) {
            db.createObjectStore(storeName);
          }
        };
      });
    };

    // Save data to IndexedDB
    const saveToIndexedDB = async (data) => {
      try {
        if (!db) await initDB();
        return new Promise((resolve, reject) => {
          const transaction = db.transaction([storeName], 'readwrite');
          const store = transaction.objectStore(storeName);
          const request = store.put(data, 'currentMembership');

          request.onsuccess = () => {
            console.log('Data saved successfully');
            resolve();
          };

          request.onerror = (event) => {
            console.error('Error saving data:', event.target.error);
            reject(event.target.error);
          };
        });
      } catch (error) {
        console.error('Error in saveToIndexedDB:', error);
      }
    };

    // Load data from IndexedDB
    const loadFromIndexedDB = async () => {
      try {
        if (!db) await initDB();
        return new Promise((resolve, reject) => {
          const transaction = db.transaction([storeName], 'readonly');
          const store = transaction.objectStore(storeName);
          const request = store.get('currentMembership');

          request.onsuccess = (event) => {
            const data = event.target.result;
            if (data) {
              console.log('Data loaded successfully');
              resolve(data);
            } else {
              resolve(null);
            }
          };

          request.onerror = (event) => {
            console.error('Error loading data:', event.target.error);
            reject(event.target.error);
          };
        });
      } catch (error) {
        console.error('Error in loadFromIndexedDB:', error);
        return null;
      }
    };

    // Track changes in a data structure
    const membershipData = {
      lastModified: new Date().toISOString(),
      tiers: {
        student: {
          price: "500,000",
          features: [],
          restrictions: [],
          removedItems: []
        },
        maker: {
          price: "1,000,000",
          features: [],
          restrictions: [],
          removedItems: []
        },
        professional: {
          price: "2,000,000",
          features: [],
          restrictions: [],
          removedItems: []
        },
        startup: {
          price: "3,500,000",
          features: [],
          restrictions: [],
          removedItems: []
        }
      }
    };

    // Function to update membership data
    async function updateMembershipData() {
      membershipData.lastModified = new Date().toISOString();
      
      // Update prices and names
      document.querySelectorAll('.card').forEach(card => {
        const tier = card.id.replace('card-', '');
        
        // Update price
        const priceEl = card.querySelector('.price-value');
        if (priceEl) {
          membershipData.tiers[tier].price = priceEl.textContent.split(' ')[0].replace(/,/g, '');
        }

        // Update tier name
        const nameEl = card.querySelector('.tier-name');
        if (nameEl) {
          membershipData.tiers[tier].name = nameEl.textContent;
        }
        
        // Get included features
        membershipData.tiers[tier].features = Array.from(card.querySelectorAll('.features-section .feature-item:not(.hidden)'))
          .map(item => ({
            id: item.getAttribute('data-feature-id') || `${tier}-feature-${Date.now()}`,
            text: item.querySelector('.feature-text').textContent,
            included: item.classList.contains('included')
          }));

        // Get restrictions
        membershipData.tiers[tier].restrictions = Array.from(card.querySelectorAll('.restrictions-section .feature-item:not(.hidden)'))
          .map(item => ({
            id: item.getAttribute('data-feature-id') || `${tier}-restriction-${Date.now()}`,
            text: item.querySelector('.feature-text').textContent,
            included: item.classList.contains('included')
          }));

        // Get removed items
        membershipData.tiers[tier].removedItems = Array.from(card.querySelectorAll('.removed-features .feature-item'))
          .map(item => ({
            id: item.getAttribute('data-feature-id') || `${tier}-removed-${Date.now()}`,
            text: item.querySelector('.feature-text').textContent
          }));
      });

      // Save to IndexedDB
      await saveToIndexedDB(membershipData);
    }

    // Load saved data when page loads
    window.addEventListener('load', async () => {
      const savedData = await loadFromIndexedDB();
      if (savedData) {
        // Restore prices and names
        Object.entries(savedData.tiers).forEach(([tier, data]) => {
          const card = document.querySelector(`#card-${tier}`);
          if (card) {
            // Restore price
            const priceEl = card.querySelector('.price-value');
            if (priceEl && data.price) {
              priceEl.textContent = `${parseInt(data.price).toLocaleString()} UZS / month`;
            }

            // Restore tier name
            const nameEl = card.querySelector('.tier-name');
            if (nameEl && data.name) {
              nameEl.textContent = data.name;
            }

            // Clear existing features and restrictions
            const featuresList = card.querySelector('.features-section .feature-list');
            const restrictionsList = card.querySelector('.restrictions-section .restriction-list');
            const removedList = document.getElementById(`removed-${tier}`);
            
            if (featuresList) featuresList.innerHTML = '';
            if (restrictionsList) restrictionsList.innerHTML = '';
            if (removedList) removedList.innerHTML = '';

            // Restore features
            if (data.features && featuresList) {
              data.features.forEach(feature => {
                const featureItem = document.createElement('li');
                featureItem.className = 'feature-item';
                featureItem.setAttribute('data-tier', tier);
                featureItem.setAttribute('data-feature-id', feature.id);
                if (feature.included) {
                  featureItem.classList.add('included');
                }
                
                featureItem.innerHTML = `
                  <span class="feature-text">${feature.text}</span>
                  <div class="feature-icons">
                    <span class="icon-btn ok ${feature.included ? 'included' : ''}" data-action="include">✓</span>
                    <span class="icon-btn remove" data-action="remove">✕</span>
                  </div>
                `;
                featuresList.appendChild(featureItem);
              });
            }

            // Restore restrictions
            if (data.restrictions && restrictionsList) {
              data.restrictions.forEach(restriction => {
                const restrictionItem = document.createElement('li');
                restrictionItem.className = 'feature-item';
                restrictionItem.setAttribute('data-tier', tier);
                restrictionItem.setAttribute('data-feature-id', restriction.id);
                if (restriction.included) {
                  restrictionItem.classList.add('included');
                }
                
                restrictionItem.innerHTML = `
                  <span class="feature-text">${restriction.text}</span>
                  <div class="feature-icons">
                    <span class="icon-btn ok ${restriction.included ? 'included' : ''}" data-action="include">✓</span>
                    <span class="icon-btn remove" data-action="remove">✕</span>
                  </div>
                `;
                restrictionsList.appendChild(restrictionItem);
              });
            }

            // Restore removed items
            if (data.removedItems && removedList) {
              data.removedItems.forEach(item => {
                const removedItem = document.createElement('li');
                removedItem.className = 'feature-item';
                removedItem.setAttribute('data-feature-id', item.id);
                
                removedItem.innerHTML = `
                  <span class="feature-text">${item.text}</span>
                  <div class="feature-icons">
                    <span class="restore-btn">Restore</span>
                  </div>
                `;

                // Add click event listener to restore button
                const restoreBtn = removedItem.querySelector('.restore-btn');
                restoreBtn.addEventListener('click', async function() {
                  const featureId = removedItem.getAttribute('data-feature-id');
                  const isRestriction = featureId.includes('restriction');
                  const sectionClass = isRestriction ? 'restrictions-section' : 'features-section';
                  const listClass = isRestriction ? 'restriction-list' : 'feature-list';
                  
                  const originalItem = document.querySelector(`#card-${tier} .${sectionClass} .${listClass} [data-feature-id="${featureId}"]`);
                  if (originalItem) {
                    originalItem.classList.remove('hidden');
                    removedItem.remove();
                    await updateMembershipData();
                  }
                });

                removedList.appendChild(removedItem);
              });
            }
          }
        });

        // Reattach event listeners to all buttons
        attachEventListeners();
      }
    });

    // Function to attach event listeners
    function attachEventListeners() {
      // Price edit buttons
      document.querySelectorAll('.price-edit-btn').forEach(button => {
        button.addEventListener('click', function() {
          const priceContainer = this.parentElement;
          const priceValue = priceContainer.querySelector('.price-value');
          const currentPrice = priceValue.textContent.split(' ')[0].replace(/,/g, '');
          
          const input = document.createElement('input');
          input.type = 'text';
          input.className = 'price-input';
          input.value = currentPrice;
          
          priceValue.style.display = 'none';
          priceContainer.insertBefore(input, this);
          input.focus();
          
          const handlePriceUpdate = async () => {
            const newPrice = input.value.replace(/,/g, '');
            if (!isNaN(newPrice) && newPrice > 0) {
              const formattedPrice = parseInt(newPrice).toLocaleString();
              priceValue.textContent = `${formattedPrice} UZS / month`;
              await updateMembershipData();
            }
            input.remove();
            priceValue.style.display = 'inline';
          };
          
          input.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
              handlePriceUpdate();
            }
          });
          
          input.addEventListener('blur', handlePriceUpdate);
        });
      });

      // Add restore button functionality
      document.querySelectorAll('.restore-btn').forEach(restoreBtn => {
        restoreBtn.addEventListener('click', async function() {
          const removedItem = this.closest('.feature-item');
          const featureId = removedItem.getAttribute('data-feature-id');
          const tier = removedItem.closest('.card').id.replace('card-', '');
          
          // Determine if it's a feature or restriction
          const isRestriction = featureId.includes('restriction');
          const sectionClass = isRestriction ? 'restrictions-section' : 'features-section';
          const listClass = isRestriction ? 'restriction-list' : 'feature-list';
          
          // Find the original item
          const originalItem = document.querySelector(`#card-${tier} .${sectionClass} .${listClass} [data-feature-id="${featureId}"]`);
          
          if (originalItem) {
            // Remove hidden class to show the item
            originalItem.classList.remove('hidden');
            // Remove the item from removed list
            removedItem.remove();
            // Update the data
            await updateMembershipData();
          }
        });
      });

      // Feature toggle buttons
      document.querySelectorAll('.icon-btn').forEach(icon => {
        icon.addEventListener('click', async function() {
          const action = this.getAttribute('data-action');
          const featureItem = this.closest('.feature-item');
          const tier = featureItem.getAttribute('data-tier');
          const featureId = featureItem.getAttribute('data-feature-id') || `${tier}-feature-${Date.now()}`;
          featureItem.setAttribute('data-feature-id', featureId);

          if (action === 'include') {
            if (featureItem.classList.contains('included')) {
              featureItem.classList.remove('included');
              this.classList.remove('included');
            } else {
              featureItem.classList.add('included');
              this.classList.add('included');
            }
            await updateMembershipData();
          }
          else if (action === 'remove') {
            const removedList = document.getElementById(`removed-${tier}`);
            const clonedItem = featureItem.cloneNode(true);
            clonedItem.setAttribute('data-feature-id', featureId);
            
            // Create restore button
            const restoreBtn = document.createElement('span');
            restoreBtn.className = 'restore-btn';
            restoreBtn.textContent = 'Restore';
            
            // Add click event listener to restore button
            restoreBtn.addEventListener('click', async function() {
              featureItem.classList.remove('hidden');
              clonedItem.remove();
              await updateMembershipData();
            });
            
            // Replace the feature icons with just the restore button
            const iconsContainer = clonedItem.querySelector('.feature-icons');
            iconsContainer.innerHTML = '';
            iconsContainer.appendChild(restoreBtn);
            
            removedList.appendChild(clonedItem);
            featureItem.classList.add('hidden');
            await updateMembershipData();
          }
        });
      });

      // Name edit buttons
      document.querySelectorAll('.name-edit-btn').forEach(button => {
        button.addEventListener('click', function() {
          const header = this.closest('h2');
          const nameSpan = header.querySelector('.tier-name');
          const currentName = nameSpan.textContent;
          
          const input = document.createElement('input');
          input.type = 'text';
          input.className = 'name-input';
          input.value = currentName;
          
          nameSpan.style.display = 'none';
          header.insertBefore(input, this);
          input.focus();
          
          const handleNameUpdate = async () => {
            const newName = input.value.trim();
            if (newName) {
              nameSpan.textContent = newName;
              await updateMembershipData();
            }
            input.remove();
            nameSpan.style.display = 'inline';
          };
          
          input.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
              handleNameUpdate();
            }
          });
          
          input.addEventListener('blur', handleNameUpdate);
        });
      });

      // Add feature buttons
      document.querySelectorAll('.add-feature-btn').forEach(button => {
        button.addEventListener('click', async function() {
          const tier = this.getAttribute('data-tier');
          const type = this.getAttribute('data-type') || 'feature';
          const input = this.closest('.add-feature-form').querySelector('.new-feature-input');
          const text = input.value.trim();
          
          if (text) {
            const list = document.querySelector(`#card-${tier} .${type === 'restriction' ? 'restrictions-section' : 'features-section'} .${type === 'restriction' ? 'restriction-list' : 'feature-list'}`);
            const newItem = document.createElement('li');
            newItem.className = 'feature-item';
            newItem.setAttribute('data-tier', tier);
            const featureId = `${type}-${Date.now()}`;
            newItem.setAttribute('data-feature-id', featureId);
            
            newItem.innerHTML = `
              <span class="feature-text">${text}</span>
              <div class="feature-icons">
                <span class="icon-btn ok" data-action="include">✓</span>
                <span class="icon-btn remove" data-action="remove">✕</span>
              </div>
            `;
            
            list.appendChild(newItem);
            input.value = '';
            await updateMembershipData();
            
            // Add event listeners to the new item's buttons
            newItem.querySelectorAll('.icon-btn').forEach(icon => {
              icon.addEventListener('click', async function() {
                const action = this.getAttribute('data-action');
                if (action === 'include') {
                  if (newItem.classList.contains('included')) {
                    newItem.classList.remove('included');
                    this.classList.remove('included');
                  } else {
                    newItem.classList.add('included');
                    this.classList.add('included');
                  }
                  await updateMembershipData();
                }
                else if (action === 'remove') {
                  const removedList = document.getElementById(`removed-${tier}`);
                  const clonedItem = newItem.cloneNode(true);
                  
                  const restoreBtn = document.createElement('span');
                  restoreBtn.className = 'restore-btn';
                  restoreBtn.textContent = 'Restore';
                  restoreBtn.onclick = async function() {
                    const originalList = document.querySelector(`#card-${tier} .${type === 'restriction' ? 'restrictions-section' : 'features-section'} .${type === 'restriction' ? 'restriction-list' : 'feature-list'}`);
                    const originalItem = document.querySelector(`#card-${tier} [data-feature-id="${clonedItem.getAttribute('data-feature-id')}"]`);
                    if (originalItem) {
                      originalItem.classList.remove('hidden');
                    }
                    clonedItem.remove();
                    await updateMembershipData();
                  };
                  
                  clonedItem.querySelector('.feature-icons').appendChild(restoreBtn);
                  removedList.appendChild(clonedItem);
                  newItem.classList.add('hidden');
                  await updateMembershipData();
                }
              });
            });
          }
        });
      });
    }

    // Initial attachment of event listeners
    attachEventListeners();

    // Export functionality
    document.getElementById('exportChanges').addEventListener('click', async function() {
      await updateMembershipData();
      
      // Create a formatted JSON string
      const jsonString = JSON.stringify(membershipData, null, 2);
      
      // Create a blob and download link
      const blob = new Blob([jsonString], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `membership-changes-${new Date().toISOString().split('T')[0]}.json`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    });
  </script>
</body>
</html> 